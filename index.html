<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Conversione ARS - EUR</title>
  <style>
    :root{
      --bg:#0b0f14; --card:#0f172a; --text:#eef2f7; --muted:#9fb0c7;
      --ring:#1f2937; --radius:18px; --shadow:0 14px 36px rgba(0,0,0,.45);
      --pad: clamp(16px, 4vw, 24px); --gap: clamp(14px, 4vw, 18px);
      --fs-title: clamp(22px, 6vw, 30px);
      --fs-label: 16px;            /* ≥16px evita lo zoom automatico iOS */
      --fs-input: clamp(26px, 8vw, 36px);
      --control-h: 68px;
    }
    html, body { height: 100%; }
    body{
      margin:0; font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 800px at 80% -10%, #13243a 0%, var(--bg) 60%);
      color:var(--text);
      min-height: 100svh; min-height: -webkit-fill-available;
      display:flex; align-items:center; justify-content:center;
      padding: calc(env(safe-area-inset-top) + var(--pad)) var(--pad) calc(env(safe-area-inset-bottom) + var(--pad));
    }
    .wrap{ width:min(720px, 100%); }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.08);
      border-radius: var(--radius); box-shadow: var(--shadow);
      padding: var(--pad); display:flex; flex-direction:column; gap: var(--gap);
    }
    h1{ margin:0; font-size:var(--fs-title); letter-spacing:.2px; text-align:center; }
    .row{ display:grid; gap: var(--gap); }
    .field{
      display:grid; gap:10px; background: var(--card);
      border:1px solid #192436; border-radius: calc(var(--radius) - 2px); padding: 12px;
    }
    .label{ font-size: var(--fs-label); color: var(--muted); }
    .input{
      width:100%; height: var(--control-h);
      font-size: var(--fs-input); line-height:1.2; color:var(--text);
      background:#0b1322; border:1px solid #1c2a41; border-radius:14px;
      padding: 10px 14px; outline:none; -webkit-appearance:none;
    }
    .input:focus{ box-shadow: 0 0 0 3px rgba(147,197,253,.25); border-color:#2b4c7e; }
    .readonly{ background:#0b1322; }
  </style>
</head>
<body>
  <main class="wrap" role="main">
    <section class="card" aria-labelledby="title">
      <h1 id="title">Conversione ARS - EUR</h1>

      <div class="row">
        <!-- ARS input -->
        <div class="field">
          <div class="label">ARS</div>
          <input id="input-ars" class="input" type="text" inputmode="decimal" pattern="[0-9,.]*"
                 autocomplete="off" placeholder="Es. 12.500" aria-label="Importo in ARS" autofocus />
        </div>

        <!-- EUR output -->
        <div class="field" aria-live="polite">
          <div class="label">EUR</div>
          <input id="output-eur" class="input readonly" type="text" readonly placeholder="€ 0,00" aria-label="Importo convertito in EUR" />
        </div>
      </div>
    </section>
  </main>

  <script>
    (function(){
      // TASSO FISSO: 1 ARS = 0,00061 EUR
      const EUR_PER_ARS = 0.00061;

      const elIn  = document.getElementById('input-ars');
      const elOut = document.getElementById('output-eur');

      const fmtEUR = new Intl.NumberFormat('it-IT', { style: 'currency', currency: 'EUR' });

      function normalizeToNumber(v){
        if (!v) return 0;
        v = (''+v).trim().replace(/\s/g,'');
        // rimuove separatori migliaia comuni . ' spazio
        v = v.replace(/\./g,'').replace(/'/g,'');
        // virgola decimale italiana -> punto
        v = v.replace(',', '.');
        const n = Number(v);
        return Number.isFinite(n) ? n : 0;
      }

      function convert(){
        const ars = normalizeToNumber(elIn.value);
        const eur = ars * EUR_PER_ARS;
        elOut.value = ars ? fmtEUR.format(eur) : '';
      }

      // Aggiorna in tempo reale mentre si scrive
      elIn.addEventListener('input', convert);

      // Se la pagina viene aperta con un valore precompilato (#val=12345), converti subito
      try{
        const hash = new URLSearchParams(location.hash.slice(1));
        const val = hash.get('val');
        if (val) { elIn.value = val; convert(); }
      }catch{}

      // Primo rendering: mostra placeholder "€ 0,00" finché non si digita
      convert();
    })();
  </script>
</body>
</html>
